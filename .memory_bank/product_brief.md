# Product Brief

## Project Name
**Santa** — AI-генератор корпоративных открыток

## Project Goal (WHY)
Разработать веб-инструмент, позволяющий сотрудникам компании анонимно или от своего имени создавать и отправлять уникальные поздравительные открытки коллегам. Инструмент использует генеративный ИИ (Google Gemini) для стилизации текста и создания изображений.

## Target Audience (FOR WHOM)

### Primary Users
- **Сотрудники компании**: Основные пользователи, создают и отправляют открытки коллегам. Авторизация не требуется.

## Key Features

### 1. Интерфейс создания открытки
- Выбор адресата из списка сотрудников (combobox с автодополнением)
- Опциональное указание отправителя (анонимная отправка по умолчанию)
- Поля "За что" (до 150 символов) и "Слова благодарности" (до 1000 символов)
- AI-стилизация текста с 5 стилями: Торжественная ода, Отчет из будущего, Хайку, Заметка в газете, Дружеский стендап
- Выбор стиля изображения: Цифровая живопись, Пиксель-арт, Космическая фантастика, Кадр из фильма

### 2. Генерация и выбор контента
- Параллельная генерация текста и изображения через Google Gemini API
- Карусели для просмотра сгенерированных вариантов
- До 3 попыток перегенерации для каждого типа контента
- Возможность выбрать лучший вариант текста и изображения

### 3. Интеграция с Telegram
- Автоматическая отправка открытки в специальную ветку командного чата
- Формат: изображение + подпись с данными открытки
- Конфигурируемые ID чата и ветки

### 4. Новогодний дизайн интерфейса
- Падающие снежинки (tsParticles)
- Glassmorphism эффекты (матовое стекло)
- Новогодняя цветовая палитра (красный, зеленый, золотой)
- Плавные анимации (@vueuse/motion)

## User Story (Main Scenario)

**Как сотрудник, я хочу:**
1. Заполнить простую форму, выбрав коллегу из списка и описав свою благодарность
2. Использовать ИИ для творческой обработки моего текста и создания уникального изображения в заданном стиле
3. Иметь возможность несколько раз перегенерировать результат и выбрать лучший из предложенных вариантов
4. Отправить финальную открытку (картинка + текст) в специальную ветку командного чата в Telegram
5. После отправки иметь возможность легко начать создание новой открытки

## Business Success Metrics

- **Adoption rate**: Процент сотрудников, использующих инструмент
- **Cards sent**: Количество отправленных открыток в месяц
- **Regeneration rate**: Среднее количество перегенераций (индикатор качества AI)
- **User satisfaction**: Отзывы от команды
- **Time to create**: Среднее время создания открытки

## Technical Constraints

### Technology Stack
- **Backend**: Python 3.11+, FastAPI
- **Frontend**: Vue.js 3, Tailwind CSS, daisyUI, PrimeVue
- **AI**: Google Gemini API (текст и изображения)
- **Messaging**: Telegram Bot API
- **Deployment**: Docker Compose

### Security & Access
- Авторизация отсутствует для пользователей
- Ограничения на отправку отсутствуют
- Премодерация контента не требуется

### Data Management
- Список сотрудников: загружается разово из Excel файла
- Хранение: JSON файл в контейнере
- Обновление: ручная замена файла при необходимости

### Configuration
- API ключи в переменных окружения, не в коде
- Параметры Telegram должны быть легко изменяемыми

## Architecture Overview

```
┌─────────────────────────────────────────────────────────────────┐
│                    Docker Compose Environment                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌─────────────────────────────────────────────────────────┐     │
│  │                   Frontend Container                      │     │
│  │  ┌─────────────────────────────────────────────────┐     │     │
│  │  │              Vue.js 3 + Vite                      │     │     │
│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────────────┐  │     │     │
│  │  │  │CardForm │  │Carousel │  │  SnowBackground │  │     │     │
│  │  │  └─────────┘  └─────────┘  └─────────────────┘  │     │     │
│  │  │       Tailwind + daisyUI + tsParticles           │     │     │
│  │  └─────────────────────────────────────────────────┘     │     │
│  │                      Nginx :80                            │     │
│  └──────────────────────────┬──────────────────────────────┘     │
│                              │                                    │
│                              │ /api/*                             │
│                              ▼                                    │
│  ┌─────────────────────────────────────────────────────────┐     │
│  │                   Backend Container                       │     │
│  │  ┌─────────────────────────────────────────────────┐     │     │
│  │  │                 FastAPI :8000                     │     │     │
│  │  │  ┌──────────┐  ┌──────────┐  ┌──────────────┐   │     │     │
│  │  │  │Cards API │  │Generation│  │Employee Repo │   │     │     │
│  │  │  │          │  │ Service  │  │  (JSON file) │   │     │     │
│  │  │  └────┬─────┘  └────┬─────┘  └──────────────┘   │     │     │
│  │  │       │             │                            │     │     │
│  │  │  ┌────▼─────────────▼────┐  ┌──────────────┐   │     │     │
│  │  │  │   Gemini Integration  │  │   Telegram   │   │     │     │
│  │  │  │   (text + images)     │  │  Integration │   │     │     │
│  │  │  └───────────────────────┘  └──────────────┘   │     │     │
│  │  └─────────────────────────────────────────────────┘     │     │
│  │                  Volume: /app/data                        │     │
│  └─────────────────────────────────────────────────────────┘     │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
                              │                    │
                              ▼                    ▼
                      ┌──────────────┐    ┌──────────────┐
                      │  Gemini API  │    │ Telegram API │
                      │  (Google)    │    │   (Bot)      │
                      └──────────────┘    └──────────────┘
```

## UI/UX Design Concept

### Visual Theme: Winter Wonderland
```
┌────────────────────────────────────────────────────────────┐
│  ❄️  ❄️  ❄️  ❄️  ❄️  ❄️  (falling snow animation)  ❄️  ❄️  │
│                                                            │
│     ┌──────────────────────────────────────────────┐      │
│     │        🎄 Новогодняя открытка 🎄             │      │
│     │    ╭─────────────────────────────────────╮   │      │
│     │    │  Glass Card with blur effect        │   │      │
│     │    │  ┌─────────────────────────────┐   │   │      │
│     │    │  │ Кому: [autocomplete ▼]      │   │   │      │
│     │    │  │ От кого: [________________] │   │   │      │
│     │    │  │ За что: [________________]  │   │   │      │
│     │    │  │ Текст:  [________________]  │   │   │      │
│     │    │  │         [________________]  │   │   │      │
│     │    │  │                             │   │   │      │
│     │    │  │ ○ Торжественная ода         │   │   │      │
│     │    │  │ ○ Отчет из будущего         │   │   │      │
│     │    │  │ ○ Хайку                     │   │   │      │
│     │    │  │                             │   │   │      │
│     │    │  │ 🎨 [style] 👾 [style] 🌌 🎬 │   │   │      │
│     │    │  │                             │   │   │      │
│     │    │  │ [  🎁 Сгенерировать  ]      │   │   │      │
│     │    │  └─────────────────────────────┘   │   │      │
│     │    ╰─────────────────────────────────────╯   │      │
│     └──────────────────────────────────────────────┘      │
│                                                            │
│  Gradient Background: #0F172A → #1E293B (winter night)    │
└────────────────────────────────────────────────────────────┘
```

### Color Palette
| Role | Color | Usage |
|------|-------|-------|
| Primary | `#DC2626` (Red) | Buttons, accents |
| Secondary | `#16A34A` (Green) | Success states, icons |
| Accent | `#F59E0B` (Gold) | Highlights, stars |
| Background | `#0F172A` (Dark Blue) | Main background |
| Surface | `rgba(255,255,255,0.1)` | Glass cards |
| Text | `#F8FAFC` (Snow White) | Primary text |

## Future Vision

### Phase 1: MVP (Current)
- Базовый функционал создания и отправки открыток
- Интеграция с Gemini для генерации текста и изображений
- Отправка в Telegram
- Новогодний дизайн

### Phase 2: Enhancements
- История отправленных открыток
- Дополнительные стили текста и изображений
- Шаблоны для особых случаев (дни рождения, праздники)

### Phase 3: Advanced
- Интеграция с корпоративными системами
- Напоминания о днях рождения коллег
- Интеграция с другими мессенджерами

---

**Version**: 1.2
**Last Updated**: 2023-11-26
**Source**: SRS.md
